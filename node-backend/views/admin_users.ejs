<%- include('base') %>
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>User Management</h2>
    <a href="/add_user" class="btn btn-primary">Add New User</a>
</div>
<div class="table-responsive">
<table class="table table-hover">
    <thead class="table-dark">
        <tr>
            <th>Email</th>
            <th>Role</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        <% if (users && users.length) { %>
        <% users.forEach(function(user) { %>
        <tr>
            <td><%= user.email %></td>
            <td><%= user.role || 'employee' %></td>
            <td>
                <% if (user.email !== current_user.email) { %>
                <form method="POST" action="/delete_user/<%= user.id %>" style="display:inline;">
                    <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Delete this user?')">Delete</button>
                </form>
                <% } else { %>
                <span class="text-muted">(You)</span>
                <% } %>
            </td>
        </tr>
        <% }) %>
        <% } else { %>
        <tr><td colspan="3" class="text-center">No users found.</td></tr>
        <% } %>
    </tbody>
</table>
</div>
